<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clip Craft - AI-Powered Video Creation</title>
    <meta name="description" content="Transform your ideas into engaging videos with AI-powered story generation and professional editing tools." />
    
    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://res.cloudinary.com" />
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://www.clarity.ms" />
    
    <!-- Preload critical resources -->
    <link rel="modulepreload" href="/src/main.tsx" />
    <link rel="modulepreload" href="/src/App.tsx" />
    
    <!-- Defer non-critical scripts -->
    <script type="text/javascript">
        // Defer Clarity loading
        window.addEventListener('load', function() {
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "seuv51ofif");
        });
    </script>
    
    <!-- Google tag (gtag.js) - Defer loading -->
    <script>
        window.addEventListener('load', function() {
            var script = document.createElement('script');
            script.async = true;
            script.src = 'https://www.googletagmanager.com/gtag/js?id=G-X3G0PH7WNZ';
            document.head.appendChild(script);
            
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-X3G0PH7WNZ');
        });
    </script>
    
    <!-- Referral tracking script -->
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const utm_source = urlParams.get('utm_source');

        if (utm_source) {
            localStorage.setItem('referral', utm_source);

            // Optional: send to Google Analytics or another service
            if (typeof gtag === 'function') {
                gtag('event', 'referral', {
                    event_category: 'User',
                    event_label: utm_source,
                });
            }
        }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

  </body>
</html>
